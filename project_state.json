{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "GreenChef is a SaaS AI recipe generator web app. Users enter ingredients and the app generates recipes via OpenAI API. Built with React + TypeScript + Vite frontend and Node.js + Express + PostgreSQL backend. Features include email auth with forgot password, three subscription tiers (Free/Pro/Premium) with Stripe payments, saved recipes, admin panel, meal planner (Premium), and a polished landing page with green color scheme.",
  "architectural_notes": [
    "Frontend: React + TypeScript + Vite with Tailwind CSS, Zustand state management, React Router v6",
    "Backend: Node.js + Express + TypeScript + PostgreSQL (pg pool)",
    "Auth: JWT-based with bcryptjs password hashing, email/password + forgot password flow",
    "AI: OpenAI API for recipe generation with a structured chef prompt",
    "Payments: Stripe Checkout + Customer Portal for Pro ($10/mo) and Premium ($20/mo) plans",
    "Free plan: 5 recipes/day limit with daily reset; Pro: unlimited; Premium: unlimited + meal planner",
    "DB tables: users, recipes, saved_recipes, api_usage with UUID primary keys",
    "Rate limiting: general 100 req/15min, strict 20 req/hr on /recipes/generate endpoint",
    "PDF download via jsPDF + html2canvas (Pro/Premium only); recipe sharing via Web Share API",
    "Admin panel at /admin route with stats (users, revenue, API usage) and user table"
  ],
  "known_issues": [],
  "isFixRequest": false,
  "imageRequirements": "## Required Images\n- Minimalist green chef's hat icon with a small leaf accent, flat vector style on transparent background (greenchef-logo.dim_256x256.png)\n- Soft flat illustration of a kitchen counter with fresh vegetables and herbs in light green tones, wide landscape composition (hero-kitchen.dim_1440x600.png)",
  "existing_features": [
    {
      "id": "feature-implement-user-authentication-using-internet-identity-the-platform-s-supported-auth-mechanism-support-user-signup-and-login-store-user-records-in-the-backend-with-fields-id-email-or-principal-plan-type-free-pro-premium-daily-recipe-count-daily-limit-and-created-at-display-a-profile-section-showing-the-user-s-name-email-and-current-subscription-status",
      "title": "Implement user authentication using Internet Identity (the platform's supported auth mechanism). Support user signup and login. Store user records in the backend with fields: id, email (or principal), plan_type (free/pro/premium), daily_recipe_count, daily_limit, and created_at. Display a profile section showing the user's name/email and current subscription status.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-display-generated-recipes-in-a-recipe-card-layout-showing-recipe-name-cooking-time-difficulty-badge-ingredients-used-list-and-step-by-step-instructions-include-action-buttons-save-pro-premium-only-share-copies-a-shareable-text-and-download-pdf-pro-premium-only-show-an-upgrade-prompt-for-free-users-who-click-save-or-download-pdf",
      "title": "Display generated recipes in a Recipe Card layout showing: Recipe Name, Cooking Time, Difficulty badge, Ingredients Used list, and Step-by-step instructions. Include action buttons: 'Save' (Pro/Premium only), 'Share' (copies a shareable text), and 'Download PDF' (Pro/Premium only). Show an upgrade prompt for free users who click Save or Download PDF.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-integrate-stripe-for-subscription-payments-implement-three-tiers-free-default-5-recipes-day-ads-shown-pro-10-month-unlimited-recipes-save-favorites-no-ads-download-pdf-and-premium-20-month-all-pro-features-plus-meal-planner-grocery-list-generation-and-nutrition-breakdown-placeholder-use-stripe-checkout-for-plan-upgrades-on-successful-payment-update-the-user-s-plan-type-in-the-backend",
      "title": "Integrate Stripe for subscription payments. Implement three tiers: Free (default, 5 recipes/day, ads shown), Pro ($10/month, unlimited recipes, save favorites, no ads, download PDF), and Premium ($20/month, all Pro features plus meal planner, grocery list generation, and nutrition breakdown placeholder). Use Stripe Checkout for plan upgrades. On successful payment, update the user's plan_type in the backend.",
      "reqIds": [
        "REQ-8"
      ],
      "version": 1
    },
    {
      "id": "feature-build-a-premium-only-meal-planner-feature-allow-premium-users-to-generate-a-weekly-meal-plan-based-on-available-ingredients-include-a-grocery-list-auto-generation-feature-that-aggregates-missing-ingredients-across-the-meal-plan-include-a-nutrition-breakdown-placeholder-section-per-recipe-can-show-estimated-values",
      "title": "Build a Premium-only Meal Planner feature. Allow Premium users to generate a weekly meal plan based on available ingredients. Include a Grocery List auto-generation feature that aggregates missing ingredients across the meal plan. Include a Nutrition Breakdown placeholder section per recipe (can show estimated values).",
      "reqIds": [
        "REQ-9"
      ],
      "version": 1
    },
    {
      "id": "feature-build-an-admin-panel-accessible-only-to-a-designated-admin-principal-display-total-registered-users-count-revenue-summary-simulated-from-stripe-webhook-data-stored-in-backend-api-usage-counter-total-recipes-generated-and-a-user-list-with-subscription-management-ability-to-change-a-user-s-plan-type-protect-the-route-so-only-the-admin-principal-can-access-it",
      "title": "Build an Admin Panel accessible only to a designated admin principal. Display: total registered users count, revenue summary (simulated from Stripe webhook data stored in backend), API usage counter (total recipes generated), and a user list with subscription management (ability to change a user's plan_type). Protect the route so only the admin principal can access it.",
      "reqIds": [
        "REQ-10"
      ],
      "version": 1
    },
    {
      "id": "feature-apply-a-consistent-minimal-green-design-system-throughout-the-entire-app-use-2e7d32-as-primary-green-a5d6a7-as-light-green-f1f8e9-as-background-12px-border-radius-on-all-buttons-soft-box-shadows-on-cards-and-modals-and-a-modern-sans-serif-font-e-g-inter-or-similar-ad-banner-placeholders-should-appear-for-free-plan-users-in-the-dashboard-area-ensure-no-jarring-color-clashes-and-maintain-visual-hierarchy",
      "title": "Apply a consistent, minimal green design system throughout the entire app. Use #2E7D32 as primary green, #A5D6A7 as light green, #F1F8E9 as background, 12px border-radius on all buttons, soft box shadows on cards and modals, and a modern sans-serif font (e.g. Inter or similar). Ad banner placeholders should appear for free-plan users in the dashboard area. Ensure no jarring color clashes and maintain visual hierarchy.",
      "reqIds": [
        "REQ-11"
      ],
      "version": 1
    },
    {
      "id": "feature-generate-a-branded-app-logo-image-a-minimalist-green-chef-s-hat-icon-with-a-small-leaf-accent-suitable-for-use-as-the-site-logo-and-favicon",
      "title": "Generate a branded app logo image: a minimalist green chef's hat icon with a small leaf accent, suitable for use as the site logo and favicon.",
      "reqIds": [
        "REQ-12"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Create a visually polished landing page with a green color scheme (Primary: #2E7D32, Light: #A5D6A7, Background: #F1F8E9), modern sans-serif font, rounded buttons (12px radius), and soft shadows. Include: (1) Hero section with headline 'Cook Smart With What You Already Have', subheadline 'Turn simple ingredients into delicious meals instantly with AI.', and a large CTA button 'Start Cooking Free'; (2) 'How It Works' section with 3 steps; (3) Pricing table showing Free, Pro ($10/mo), and Premium ($20/mo) plans; (4) Testimonials section; (5) FAQ section; (6) Footer with Privacy Policy and Terms of Service links. The entire app must be fully mobile responsive.",
      "reqIds": [
        "REQ-1"
      ],
      "status": "pending"
    },
    {
      "id": "AR-3",
      "summary": "Build the Home Dashboard for authenticated users. Include: (1) A large ingredient input field with placeholder text 'Enter ingredients (e.g. rice, tomato, onion)'; (2) An 'Add ingredient (+)' button to add ingredients as removable tags/chips; (3) A large primary green 'Generate Recipe' button; (4) A daily usage counter visible to free-plan users showing e.g. '3 / 5 recipes used today'.",
      "reqIds": [
        "REQ-3"
      ],
      "status": "pending"
    },
    {
      "id": "AR-4",
      "summary": "Implement recipe generation by calling an external AI API (OpenAI-compatible HTTP outcall from the Motoko backend). Use the following system prompt: 'You are a professional home chef. Create a simple, easy-to-cook recipe using ONLY these ingredients: {{user_ingredients}}. Rules: Cooking time under 30 minutes. Minimal extra ingredients. Clear step-by-step instructions. Mention cooking time. Mention difficulty (Easy/Medium). Give a creative recipe name. Friendly tone.' Parse the AI response and return structured data: recipe name, cooking time, difficulty, ingredients used, and step-by-step instructions. Enforce the daily limit (5/day for free users, unlimited for Pro/Premium) in the backend before calling the AI.",
      "reqIds": [
        "REQ-4"
      ],
      "status": "pending"
    },
    {
      "id": "AR-6",
      "summary": "Implement recipe persistence in the Motoko backend. Store generated recipes with fields: id, user_id, ingredients_input (array of strings), generated_recipe (full structured text/JSON), and created_at. Implement a saved recipes table with id, user_id, and recipe_id. Expose query methods: get all recipes for a user, save a recipe (Pro/Premium only), get saved recipes for a user, and delete a saved recipe.",
      "reqIds": [
        "REQ-6"
      ],
      "status": "pending"
    },
    {
      "id": "AR-7",
      "summary": "Build a Saved Recipes page for Pro/Premium users that displays all their saved recipe cards in a grid. Each card shows the recipe name, difficulty, cooking time, and a button to view full details or remove from saved.",
      "reqIds": [
        "REQ-7"
      ],
      "status": "pending"
    },
    {
      "id": "AR-13",
      "summary": "Generate a hero background illustration for the landing page: a soft, light-green toned flat illustration of a kitchen counter with fresh vegetables and herbs arranged neatly, suitable as a background or hero visual.",
      "reqIds": [
        "REQ-13"
      ],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "GreenChef",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}